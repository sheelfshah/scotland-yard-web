function status_update(t,e){$("#status").fadeIn(100),$("#status").text(t),setTimeout(function(){$("#status").fadeOut(100)},e)}function role_to_name(t){return"mrx"===t.slice(0,3)?"MrX "+t.slice(5):"det"===t.slice(0,3)?"Detective"+t[3]+" "+t.slice(5):"Error"}function get_player_name(t){var e,a=Object.keys(game_state);for(e in a)if(a[e][3]==t)return a[e];return"Error"}function get_next_role(t,e){t=t||current_stats_role;t=parseInt(t[3]);return get_player_name(t=e?((t-1)%6+6)%6:(t+1)%6)}function show_stats(t){$("#player-stat-name").text(role_to_name(t)),$("#player-stat-name").css("color",game_state[t].color),current_stats_role=t,$("#player-stat-position").text(""),$("#player-stat-position").text(game_state[t].position);var e,a,r,s=document.getElementById("player-stat-tokens"),o=document.createElement("table"),n=game_state[t].tokens,c={taxi:"#f6e64e",bus:"#2EA49B",underground:"#F24736",double:"#22dd22",blackticket:"#000000"};for(e in n)0<n[e]&&((r=(a=o.insertRow(-1)).insertCell(-1)).innerHTML=e,r.style.color=c[e],(r=a.insertCell(-1)).innerHTML=n[e],r.style.color=c[e]);s.innerHTML="",s.appendChild(o)}function show_mrx_stats(){var t=get_player_name(0),e=game_state[t].moves_played;$("#rounds-played").text("Round: "+e);for(var a=[34,221,34],r=[255,107,91],s=[],o=0;o<a.length;o++){var n=e/24;s[o]=a[o]*(1-n)+r[o]*n}$("#rounds-played").css("color","rgb("+s+")");var c=game_state[t].last_transport_used;c?$("#mrx-last-transport").text("MrX used "+c):$("#mrx-last-transport").text("MrX hasn't moved yet");for(var i=game_state[t].reveal_times,l=0,_=0,o=0;o<i.length;o++){if(e<i[o]){l=i[o]-e,0<o&&(_=e-i[o-1]);break}l=0}t=game_state[t].last_public_position;t?$("#mrx-last-seen").text("MrX was last seen at "+t+", "+_+" rounds ago"):$("#mrx-last-seen").text("MrX hsn't been spotted yet"),l?$("#next-reveal-in").text("MrX will be spotted in "+l+" rounds"):$("#next-reveal-in").text("MrX won't be spotted now")}function show_circles(){var t,e,a,r=Object.keys(game_state);for(t in r)[0,1,2,3,4,5].includes(parseInt(r[t][3]))&&game_state[r[t]].position&&(e=game_state[r[t]].position,a=game_state[r[t]].color,ctx.beginPath(),ctx.arc(sc[e.toString()].x*factor,sc[e.toString()].y*factor,23*factor,0,2*Math.PI),ctx.lineWidth=10*factor,ctx.strokeStyle=a,ctx.stroke());var s,o=get_player_name(0);game_state[o].last_public_position&&(s=game_state[o].last_public_position,o=-.15,ctx.beginPath(),ctx.arc(sc[s.toString()].x*factor,sc[s.toString()].y*factor,23*factor,o*Math.PI,(.6+o)*Math.PI),ctx.lineWidth=10*factor,ctx.strokeStyle="#333333",ctx.stroke(),ctx.beginPath(),ctx.arc(sc[s.toString()].x*factor,sc[s.toString()].y*factor,23*factor,.51*Math.PI,1.11*Math.PI),ctx.lineWidth=10*factor,ctx.strokeStyle="#333333",ctx.stroke(),ctx.beginPath(),ctx.arc(sc[s.toString()].x*factor,sc[s.toString()].y*factor,23*factor,(1.33+o)*Math.PI,1.78*Math.PI),ctx.lineWidth=10*factor,ctx.strokeStyle="#333333",ctx.stroke())}