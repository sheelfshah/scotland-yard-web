function path_to_text(e){for(var t="Shortest path: ",o=0;o<e.length;o++)t+=e[o][1]+" to "+e[o][0],o!=e.length-1&&(t+=", ");return t}function show_move_panel(){$select=$("#move-select").selectize({valueField:"id",labelField:"text",searchField:["text","optgroup"],placeholder:"Pick a move...",maxItems:1,maxOptions:1e3,closeAfterSelect:!0,plugins:["add_class"]});var o=$select[0].selectize;$("#move-panel").removeClass("hidden"),o.clearOptions(!0),o.addOptionGroup("taxi",{label:"Taxi"}),o.addOptionGroup("bus",{label:"Bus"}),o.addOptionGroup("underground",{label:"Underground"});var e=!0;"mrx"===syg_role.slice(0,3)&&(e=!1,o.addOptionGroup("blackticket",{label:"Black Ticket"}));var t=graph.allroutes(game_state[syg_role].position,1,[],e);for(s in t){var a=t[s],l=path_to_move_dict(a);o.addOption({text:"To "+a[0][0],id:JSON.stringify(l),optgroup:a[0][1],add_class:a[0][1]})}if(!e){o.addOptionGroup("double",{label:"Double"});var s,i=graph.allroutes(game_state[syg_role].position,2,[],e);for(s in i){a=i[s],l=path_to_move_dict(a);o.addOption({text:a[0][1]+" to "+a[0][0]+", "+a[1][1]+" to "+a[1][0],id:JSON.stringify(l),optgroup:"double",add_class:"double"})}}o.refreshOptions(!1),o.on("item_add",function(e,t){e&&e!=JSON.stringify(latest_move_dict)&&(e=JSON.parse(e),console.log(e),play_move(e)),o.clear()})}function hide_move_panel(){var e=$select[0].selectize;e.clearOptions(!0),e.settings.placeholder="Wait for your turn",e.updatePlaceholder(),$("#move-panel").addClass("hidden")}function quick_move(t){if(game_state.current_playing==syg_role){var o="mrx"!=syg_role.slice(0,3),a=graph.allroutes(game_state[syg_role].position,1,[],o);let e=[];for(var l=0;l<a.length;l++)a[l][0][0]==t&&e.push(a[l]);if(0!==e.length)if(1!==e.length){var s=$("#quick-move-form");s.html("");for(l=0;l<e.length;l++){var i=path_to_move_dict(e[l]),r=$("<button name='transport' type='submit' value='"+JSON.stringify(i)+"'>"+e[l][0][1]+"</button>");"taxi"==e[l][0][1]?r.css("color","#f6e64e"):"bus"==e[l][0][1]?r.css("color","#2EA49B"):"underground"==e[l][0][1]?r.css("color","#F24736"):"blackticket"==e[l][0][1]&&r.css("color","#000"),r.click(function(e){play_move(JSON.parse($(this).val())),$("#quick-move-panel").addClass("hidden"),e.preventDefault()}),s.append(r)}$("#quick-move-text").text("Move to "+t+" via?"),$("#quick-move-panel").removeClass("hidden")}else{var i=path_to_move_dict(e[0]);play_move(i)}else status_update("Can't quick-move to "+t,4e3)}else status_update("Not your turn to play",2500)}Selectize.define("add_class",function(e){e=$.extend({className:"favorited"},e);var a,t;t=(a=this).setup,a.setup=function(){var o=a.settings.render.option;a.settings.render.option=function(e){var t=o.apply(a,arguments),t=$(t);t.attr("class");return e.add_class&&t.addClass(e.add_class),$("<div>").append(t.clone()).html()},t.apply(a,arguments)}});