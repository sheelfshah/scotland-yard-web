{% load static %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Redirecting</title>
    <link rel="stylesheet" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
</head>
<body>
    <h1>You should be redirected in a while</h1>
    <a id="redirect_anchor">Force redirect</a>
    <h2>While we're at it, subscribe to PewDiePie</h2>
    <h3>And also maybe star the repository on github</h3>

    <script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'vendor/bootstrap/js/bootstrap.min.js' %}"></script>
    <script>
    window.onload = function(){
        if(!window.localStorage.getItem("syg_name")){
            document.getElementById("redirect_anchor").href = 'http://' + window.location.host + '/scotland_yard/';
            document.getElementById("redirect_anchor").click();
        }
        else{
            var room_num = {{room_num}}; // int
            window.localStorage.setItem("syg_room_num", room_num);
            console.log("Local Storage set");
            
            document.getElementById("redirect_anchor").href = window.location.protocol + "//" + window.location.host + '/scotland_yard/game/' + room_num.toString();
            setTimeout(function() {
                document.getElementById("redirect_anchor").click();
            }, 1000);
        }
    };
    </script>
</body>
</html>